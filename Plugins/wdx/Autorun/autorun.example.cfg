# Enables MoveButton functionality
# Включает функционал MoveButton
LoadLibrary Plugins\Autorun_MoveButton.dll
MoveOptionsButton MOVE_LEGACY

# Uncomment to enable additional system info
# Раскомментируйте для дополнительной системной информации
# LoadLibrary Plugins\Autorun_Sysinfo.dll

# Adding current TC path to PATH environment variable
# Добавляет к переменной окружения PATH текущую папку TC
SetEnv /A /EV PATH ;%COMMANDER_PATH%

# Enables showing of administrative shares
# Включает отображение административных шар
SendCommand cm_AdministerServer

# The block below sets COMMANDER_PROGRAM environment variable
# to corresponding TC executable path depending on it's architecture
# Блок ниже устанавливает в переменную окружения COMMANDER_PROGRAM
# путь к исполняемому файлу TC в зависимости от его архитектуры
If %AUTORUN_TCARCH% = 32 Then 
  SetEnv /EV COMMANDER_PROGRAM %COMMANDER_PATH%\TOTALCMD.EXE
Else 
  SetEnv /EV COMMANDER_PROGRAM %COMMANDER_PATH%\TOTALCMD64.EXE
EndIf

# Retrieve OS version with commandline tool. This can be relatively slow.
# Получение версии ОС с помощью командной строки Windows. Это может быть относительно медленно.
#
# LoadLibrary Plugins\Autorun_Process.dll
# ProcessExecGetOutput OSVER %COMSPEC% '/c ver'
# SetEnv /EV COMMANDER_OSVER "%OSVER%"

# After this line all actions are performed when TC closing
# После этой строки все действия выполняются при закрытии TC
Pragma AutorunFinalizeSection

